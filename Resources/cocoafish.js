var document={getElementsByTagName:function(){},cookie:""};var OAuth;if(OAuth==null){OAuth={}}OAuth.setProperties=function setProperties(a,c){if(a!=null&&c!=null){for(var b in c){a[b]=c[b]}}return a};OAuth.setProperties(OAuth,{percentEncode:function percentEncode(b){if(b==null){return""}if(b instanceof Array){var c="";for(var a=0;a<b.length;++b){if(c!=""){c+="&"}c+=OAuth.percentEncode(b[a])}return c}b=encodeURIComponent(b);b=b.replace(/\!/g,"%21");b=b.replace(/\*/g,"%2A");b=b.replace(/\'/g,"%27");b=b.replace(/\(/g,"%28");b=b.replace(/\)/g,"%29");return b},decodePercent:function decodePercent(a){if(a!=null){a=a.replace(/\+/g," ")}return decodeURIComponent(a)},getParameterList:function getParameterList(a){if(a==null){return[]}if(typeof a!="object"){return OAuth.decodeForm(a+"")}if(a instanceof Array){return a}var b=[];for(var c in a){b.push([c,a[c]])}return b},getParameterMap:function getParameterMap(b){if(b==null){return{}}if(typeof b!="object"){return OAuth.getParameterMap(OAuth.decodeForm(b+""))}if(b instanceof Array){var d={};for(var c=0;c<b.length;++c){var a=b[c][0];if(d[a]===undefined){d[a]=b[c][1]}}return d}return b},getParameter:function getParameter(b,a){if(b instanceof Array){for(var c=0;c<b.length;++c){if(b[c][0]==a){return b[c][1]}}}else{return OAuth.getParameterMap(b)[a]}return null},formEncode:function formEncode(b){var a="";var d=OAuth.getParameterList(b);for(var f=0;f<d.length;++f){var c=d[f][1];if(c==null){c=""}if(a!=""){a+="&"}a+=OAuth.percentEncode(d[f][0])+"="+OAuth.percentEncode(c)}return a},decodeForm:function decodeForm(d){var g=[];var i=d.split("&");for(var h=0;h<i.length;++h){var a=i[h];if(a==""){continue}var c=a.indexOf("=");var b;var f;if(c<0){b=OAuth.decodePercent(a);f=null}else{b=OAuth.decodePercent(a.substring(0,c));f=OAuth.decodePercent(a.substring(c+1))}g.push([b,f])}return g},setParameter:function setParameter(c,a,d){var b=c.parameters;if(b instanceof Array){for(var f=0;f<b.length;++f){if(b[f][0]==a){if(d===undefined){b.splice(f,1)}else{b[f][1]=d;d=undefined}}}if(d!==undefined){b.push([a,d])}}else{b=OAuth.getParameterMap(b);b[a]=d;c.parameters=b}},setParameters:function setParameters(c,b){var d=OAuth.getParameterList(b);for(var a=0;a<d.length;++a){OAuth.setParameter(c,d[a][0],d[a][1])}},completeRequest:function completeRequest(b,a){if(b.method==null){b.method="GET"}var c=OAuth.getParameterMap(b.parameters);if(c.oauth_consumer_key==null){OAuth.setParameter(b,"oauth_consumer_key",a.consumerKey||"")}if(c.oauth_token==null&&a.token!=null){OAuth.setParameter(b,"oauth_token",a.token)}if(c.oauth_version==null){OAuth.setParameter(b,"oauth_version","1.0")}if(c.oauth_timestamp==null){OAuth.setParameter(b,"oauth_timestamp",OAuth.timestamp())}if(c.oauth_nonce==null){OAuth.setParameter(b,"oauth_nonce",OAuth.nonce(6))}OAuth.SignatureMethod.sign(b,a)},setTimestampAndNonce:function setTimestampAndNonce(a){OAuth.setParameter(a,"oauth_timestamp",OAuth.timestamp());OAuth.setParameter(a,"oauth_nonce",OAuth.nonce(6))},addToURL:function addToURL(a,c){newURL=a;if(c!=null){var b=OAuth.formEncode(c);if(b.length>0){var d=a.indexOf("?");if(d<0){newURL+="?"}else{newURL+="&"}newURL+=b}}return newURL},getAuthorizationHeader:function getAuthorizationHeader(a,c){var h='OAuth realm="'+OAuth.percentEncode(a)+'"';var d=OAuth.getParameterList(c);for(var f=0;f<d.length;++f){var g=d[f];var b=g[0];if(b.indexOf("oauth_")==0){h+=","+OAuth.percentEncode(b)+'="'+OAuth.percentEncode(g[1])+'"'}}return h},correctTimestampFromSrc:function correctTimestampFromSrc(b){b=b||"oauth_timestamp";var a=document.getElementsByTagName("script");if(a==null||!a.length){return}var f=a[a.length-1].src;if(!f){return}var d=f.indexOf("?");if(d<0){return}parameters=OAuth.getParameterMap(OAuth.decodeForm(f.substring(d+1)));var c=parameters[b];if(c==null){return}OAuth.correctTimestamp(c)},correctTimestamp:function correctTimestamp(a){OAuth.timeCorrectionMsec=(a*1000)-(new Date()).getTime()},timeCorrectionMsec:0,timestamp:function timestamp(){var a=(new Date()).getTime()+OAuth.timeCorrectionMsec;return Math.floor(a/1000)},nonce:function nonce(f){var d=OAuth.nonce.CHARS;var a="";for(var c=0;c<f;++c){var b=Math.floor(Math.random()*d.length);a+=d.substring(b,b+1)}return a}});OAuth.nonce.CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";OAuth.declareClass=function declareClass(d,a,c){var f=d[a];d[a]=c;if(c!=null&&f!=null){for(var b in f){if(b!="prototype"){c[b]=f[b]}}}return c};OAuth.declareClass(OAuth,"SignatureMethod",function OAuthSignatureMethod(){});OAuth.setProperties(OAuth.SignatureMethod.prototype,{sign:function sign(c){var b=OAuth.SignatureMethod.getBaseString(c);var a=this.getSignature(b);OAuth.setParameter(c,"oauth_signature",a);return a},initialize:function initialize(c,a){var b;if(a.accessorSecret!=null&&c.length>9&&c.substring(c.length-9)=="-Accessor"){b=a.accessorSecret}else{b=a.consumerSecret}this.key=OAuth.percentEncode(b)+"&"+OAuth.percentEncode(a.tokenSecret)}});OAuth.setProperties(OAuth.SignatureMethod,{sign:function sign(c,a){var b=OAuth.getParameterMap(c.parameters).oauth_signature_method;if(b==null||b==""){b="HMAC-SHA1";OAuth.setParameter(c,"oauth_signature_method",b)}OAuth.SignatureMethod.newMethod(b,a).sign(c)},newMethod:function newMethod(d,a){var c=OAuth.SignatureMethod.REGISTERED[d];if(c!=null){var h=new c();h.initialize(d,a);return h}var g=new Error("signature_method_rejected");var b="";for(var f in OAuth.SignatureMethod.REGISTERED){if(b!=""){b+="&"}b+=OAuth.percentEncode(f)}g.oauth_acceptable_signature_methods=b;throw g},REGISTERED:{},registerMethodClass:function registerMethodClass(b,a){for(var c=0;c<b.length;++c){OAuth.SignatureMethod.REGISTERED[b[c]]=a}},makeSubclass:function makeSubclass(a){var b=OAuth.SignatureMethod;var c=function(){b.call(this)};c.prototype=new b();c.prototype.getSignature=a;c.prototype.constructor=c;return c},getBaseString:function getBaseString(g){var b=g.action;var h=b.indexOf("?");var f;if(h<0){f=g.parameters}else{f=OAuth.decodeForm(b.substring(h+1));var d=OAuth.getParameterList(g.parameters);for(var c=0;c<d.length;++c){f.push(d[c])}}return OAuth.percentEncode(g.method.toUpperCase())+"&"+OAuth.percentEncode(OAuth.SignatureMethod.normalizeUrl(b))+"&"+OAuth.percentEncode(OAuth.SignatureMethod.normalizeParameters(f))},normalizeUrl:function normalizeUrl(c){var d=OAuth.SignatureMethod.parseUri(c);var a=d.protocol.toLowerCase();var g=d.authority.toLowerCase();var h=(a=="http"&&d.port==80)||(a=="https"&&d.port==443);if(h){var b=g.lastIndexOf(":");if(b>=0){g=g.substring(0,b)}}var f=d.path;if(!f){f="/"}return a+"://"+g+f},parseUri:function parseUri(f){var d={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}};var a=d.parser.strict.exec(f);var c={};var b=14;while(b--){c[d.key[b]]=a[b]||""}return c},normalizeParameters:function normalizeParameters(d){if(d==null){return""}var f=OAuth.getParameterList(d);var h=[];for(var g=0;g<f.length;++g){var b=f[g];if(b[0]!="oauth_signature"){h.push([OAuth.percentEncode(b[0])+" "+OAuth.percentEncode(b[1]),b])}}h.sort(function(j,i){if(j[0]<i[0]){return -1}if(j[0]>i[0]){return 1}return 0});var a=[];for(var c=0;c<h.length;++c){a.push(h[c][1])}return OAuth.formEncode(a)}});OAuth.SignatureMethod.registerMethodClass(["PLAINTEXT","PLAINTEXT-Accessor"],OAuth.SignatureMethod.makeSubclass(function getSignature(a){return this.key}));OAuth.SignatureMethod.registerMethodClass(["HMAC-SHA1","HMAC-SHA1-Accessor"],OAuth.SignatureMethod.makeSubclass(function getSignature(b){b64pad="=";var a=b64_hmac_sha1(this.key,b);return a}));try{OAuth.correctTimestampFromSrc()}catch(e){}var hexcase=0;var b64pad="";var chrsz=8;function hex_sha1(a){return binb2hex(core_sha1(str2binb(a),a.length*chrsz))}function b64_sha1(a){return binb2b64(core_sha1(str2binb(a),a.length*chrsz))}function str_sha1(a){return binb2str(core_sha1(str2binb(a),a.length*chrsz))}function hex_hmac_sha1(a,b){return binb2hex(core_hmac_sha1(a,b))}function b64_hmac_sha1(a,b){return binb2b64(core_hmac_sha1(a,b))}function str_hmac_sha1(a,b){return binb2str(core_hmac_sha1(a,b))}function sha1_vm_test(){return hex_sha1("abc")=="a9993e364706816aba3e25717850c26c9cd0d89d"}function core_sha1(y,o){y[o>>5]|=128<<(24-o%32);y[((o+64>>9)<<4)+15]=o;var z=Array(80);var u=1732584193;var s=-271733879;var r=-1732584194;var q=271733878;var p=-1009589776;for(var l=0;l<y.length;l+=16){var n=u;var m=s;var k=r;var h=q;var f=p;for(var g=0;g<80;g++){if(g<16){z[g]=y[l+g]}else{z[g]=rol(z[g-3]^z[g-8]^z[g-14]^z[g-16],1)}var A=safe_add(safe_add(rol(u,5),sha1_ft(g,s,r,q)),safe_add(safe_add(p,z[g]),sha1_kt(g)));p=q;q=r;r=rol(s,30);s=u;u=A}u=safe_add(u,n);s=safe_add(s,m);r=safe_add(r,k);q=safe_add(q,h);p=safe_add(p,f)}return Array(u,s,r,q,p)}function sha1_ft(f,a,h,g){if(f<20){return(a&h)|((~a)&g)}if(f<40){return a^h^g}if(f<60){return(a&h)|(a&g)|(h&g)}return a^h^g}function sha1_kt(a){return(a<20)?1518500249:(a<40)?1859775393:(a<60)?-1894007588:-899497514}function core_hmac_sha1(c,g){var f=str2binb(c);if(f.length>16){f=core_sha1(f,c.length*chrsz)}var a=Array(16),d=Array(16);for(var b=0;b<16;b++){a[b]=f[b]^909522486;d[b]=f[b]^1549556828}var h=core_sha1(a.concat(str2binb(g)),512+g.length*chrsz);return core_sha1(d.concat(h),512+160)}function safe_add(a,d){var c=(a&65535)+(d&65535);var b=(a>>16)+(d>>16)+(c>>16);return(b<<16)|(c&65535)}function rol(a,b){return(a<<b)|(a>>>(32-b))}function str2binb(d){var c=Array();var a=(1<<chrsz)-1;for(var b=0;b<d.length*chrsz;b+=chrsz){c[b>>5]|=(d.charCodeAt(b/chrsz)&a)<<(32-chrsz-b%32)}return c}function binb2str(c){var d="";var a=(1<<chrsz)-1;for(var b=0;b<c.length*32;b+=chrsz){d+=String.fromCharCode((c[b>>5]>>>(32-chrsz-b%32))&a)}return d}function binb2hex(c){var b=hexcase?"0123456789ABCDEF":"0123456789abcdef";var d="";for(var a=0;a<c.length*4;a++){d+=b.charAt((c[a>>2]>>((3-a%4)*8+4))&15)+b.charAt((c[a>>2]>>((3-a%4)*8))&15)}return d}function binb2b64(d){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var g="";for(var b=0;b<d.length*4;b+=3){var f=(((d[b>>2]>>8*(3-b%4))&255)<<16)|(((d[b+1>>2]>>8*(3-(b+1)%4))&255)<<8)|((d[b+2>>2]>>8*(3-(b+2)%4))&255);for(var a=0;a<4;a++){if(b*8+a*6>d.length*32){g+=b64pad}else{g+=c.charAt((f>>6*(3-a))&63)}}}return g}var com;if(!com){com={}}if(!com.cocoafish){com.cocoafish={}}if(!com.cocoafish.constants){com.cocoafish.constants={}}if(!com.cocoafish.js){com.cocoafish.js={}}if(!com.cocoafish.js.sdk){com.cocoafish.js.sdk={}}if(!com.cocoafish.js.sdk.utils){com.cocoafish.js.sdk.utils={}}if(!com.cocoafish.sdk){com.cocoafish.sdk={}}if(!com.cocoafish.sdk.url){com.cocoafish.sdk.url={}}com.cocoafish.sdk.url.http="http://";com.cocoafish.sdk.url.https="https://";com.cocoafish.sdk.url.baseURL="api.cloud.appcelerator.com";com.cocoafish.sdk.url.version="v1";com.cocoafish.constants.get_method="GET";com.cocoafish.constants.post_method="POST";com.cocoafish.constants.put_method="PUT";com.cocoafish.constants.delete_method="DELETE";com.cocoafish.constants.app_key=1;com.cocoafish.constants.oauth=2;com.cocoafish.constants.unknown=-1;com.cocoafish.constants.keyParam="?key=";com.cocoafish.constants.json="json";com.cocoafish.constants.sessionId="_session_id";com.cocoafish.constants.sessionCookieName="Cookie";com.cocoafish.constants.responseCookieName="Set-Cookie";com.cocoafish.constants.ie="MSIE";com.cocoafish.constants.ie_v7=7;com.cocoafish.constants.file="file";com.cocoafish.constants.userId="user_id";com.cocoafish.constants.placeId="place_id";com.cocoafish.constants.suppressCode="suppress_response_codes";com.cocoafish.constants.response_wrapper="response_wrapper";com.cocoafish.constants.ie_post_message="ie_post_message";com.cocoafish.constants.oauth_consumer_key="oauth_consumer_key";com.cocoafish.constants.photo="photo";com.cocoafish.constants.method="_method";com.cocoafish.constants.name="name";com.cocoafish.constants.value="value";com.cocoafish.constants.oauth_header="Authorization";com.cocoafish.constants.noAppKeyError={meta:{status:"fail",code:409,message:"Application key is not provided."}};com.cocoafish.constants.fileLoadError={meta:{status:"fail",code:400,message:"Unable to load file"}};com.cocoafish.constants.invalidArgumentError={meta:{status:"fail",code:400,message:"Invalid number of arguments, expecting at least 4 arguments."}};com.cocoafish.constants.appcelerator="Appcelerator";com.cocoafish.js.sdk.utils.getSessionParams=function(){var a=null;var b=com.cocoafish.js.sdk.utils.getCookie(com.cocoafish.constants.sessionId);if(b){a=com.cocoafish.constants.sessionId+"="+b}return a};com.cocoafish.js.sdk.utils.trim=function(a){if(a){return a.replace(/(^\s*)(\s*$)/g,"")}return""};com.cocoafish.js.sdk.utils.checkAppcelerator=function(){try{Titanium.userAgent;return true}catch(a){return false}};com.cocoafish.js.sdk.utils.BrowserDetect={init:function(){if(com.cocoafish.js.sdk.utils.checkAppcelerator()){this.browser=com.cocoafish.constants.appcelerator;agent=Titanium.userAgent;if(agent){v=agent.substring(agent.indexOf("/")+1,agent.indexOf("("));osStr=agent.substring(agent.indexOf("(")+1,agent.indexOf(")"));var a=osStr.split(";");if(v){this.version=com.cocoafish.js.sdk.utils.trim(v)}if(a&&a.length>2){this.OS=com.cocoafish.js.sdk.utils.trim(a[1])}}}else{this.dataBrowser=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"MSIE",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}];this.dataOS=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}];this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"}},searchString:function(d){for(var a=0;a<d.length;a++){var b=d[a].string;var c=d[a].prop;this.versionSearchString=d[a].versionSearch||d[a].identity;if(b){if(b.indexOf(d[a].subString)!=-1){return d[a].identity}}else{if(c){return d[a].identity}}}},searchVersion:function(b){var a=b.indexOf(this.versionSearchString);if(a==-1){return}return parseFloat(b.substring(a+this.versionSearchString.length+1))}};com.cocoafish.js.sdk.utils.BrowserDetect.init();com.cocoafish.js.sdk.utils.getCookie=function(a){var h=document.cookie.split(";");var c="";var f="";var g="";var d=false;var b="";for(b=0;b<h.length;b++){c=h[b].split("=");f=c[0].replace(/^\s+|\s+$/g,"");if(f==a){d=true;if(c.length>1){g=unescape(c[1].replace(/^\s+|\s+$/g,""))}return g;break}c=null;f=""}if(!d){return null}};com.cocoafish.js.sdk.utils.setCookie=function(c,f,a,i,d,h){var b=new Date();b.setTime(b.getTime());if(a){a=a*1000*60*60*24}var g=new Date(b.getTime()+(a));document.cookie=c+"="+escape(f)+((a)?";expires="+g.toGMTString():"")+((i)?";path="+i:"")+((d)?";domain="+d:"")+((h)?";secure":"")};com.cocoafish.js.sdk.utils.deleteCookie=function(a,c,b){if(com.cocoafish.js.sdk.utils.getCookie(a)){document.cookie=a+"="+((c)?";path="+c:"")+((b)?";domain="+b:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}};com.cocoafish.js.sdk.utils.getAuthType=function(a){if(a){if(a.appKey){return com.cocoafish.constants.app_key}else{if(a.oauthKey&&a.oauthSecret){return com.cocoafish.constants.oauth}}}return com.cocoafish.constants.unknown};com.cocoafish.js.sdk.utils.prepareFormData=function(c){if(window.FormData){var d=new FormData();if(c){for(prop in c){if(!c.hasOwnProperty(prop)){continue}if(prop==com.cocoafish.constants.photo||prop==com.cocoafish.constants.file){var a=c[prop];var b=document.getElementById(a);if(b&&b.files[0]){d.append(prop,b.files[0])}}else{d.append(prop,c[prop])}}}return d}};com.cocoafish.js.sdk.utils.prepareFormDataArray=function(c){var b=new Array();if(c){for(prop in c){if(!c.hasOwnProperty(prop)){continue}if(prop!=com.cocoafish.constants.photo&&prop!=com.cocoafish.constants.file){var a=new Object();a[com.cocoafish.constants.name]=prop;a[com.cocoafish.constants.value]=c[prop];b.push(a)}}}return b};com.cocoafish.js.sdk.utils.getFileObject=function(c){if(c){for(prop in c){if(!c.hasOwnProperty(prop)){continue}if(prop==com.cocoafish.constants.photo||prop==com.cocoafish.constants.file){if(com.cocoafish.js.sdk.utils.BrowserDetect.browser==com.cocoafish.constants.appcelerator){return c[prop]}else{var a=c[prop];var b=$("#"+a);return b}}}}return null};com.cocoafish.js.sdk.utils.cleanInvalidData=function(a){if(a){for(prop in a){if(!a.hasOwnProperty(prop)){continue}if(a[prop]==null){delete a[prop]}}return a}else{return{}}};com.cocoafish.js.sdk.utils.uploadMessageCallback=function(a){if(a&&a.data){return $.parseJSON(a.data)}else{return{}}};com.cocoafish.js.sdk.utils.getOAuthParameters=function(c){var a="";if(c){var d=OAuth.getParameterList(c);for(var f=0;f<d.length;++f){var g=d[f];var b=g[0];if(b.indexOf("oauth_")==0&&b!="oauth_token"){a+="&"+OAuth.percentEncode(b)+"="+OAuth.percentEncode(g[1])}}}if(a.length>0){a=a.substring(1)}return a};com.cocoafish.js.sdk.utils.populateOAuthParameters=function(b,a){if(b&&a){b.push(["oauth_version","1.0"]);b.push(["oauth_consumer_key",a]);b.push(["oauth_signature_method","HMAC-SHA1"]);b.push(["oauth_nonce",OAuth.nonce(15)])}};com.cocoafish.js.sdk.utils.sendAppceleratorRequest=function(b,a,f,g,i,h){var j=Titanium.Network.createHTTPClient();j.setTimeout(60000);j.onerror=function(m){var k=this.responseText;var l=JSON.parse(k);if(l&&l.meta){l.metaString=JSON.stringify(l.meta)}i(l)};j.onload=function(m){var k=this.responseText;var l=JSON.parse(k);if(l&&l.meta){l.metaString=JSON.stringify(l.meta);if(l.meta.session_id){var n=l.meta.session_id;com.cocoafish.js.sdk.utils.setCookie(com.cocoafish.constants.sessionId,n);h.session_id=n}}i(l)};var c=b;if(a.toUpperCase()==com.cocoafish.constants.get_method){if(f){var d="";for(prop in f){if(!f.hasOwnProperty(prop)){continue}d+="&"+prop+"="+f[prop]}if(d.length>0){if(b.indexOf("?")>0){c+=d}else{c+="?"+d.substring(1)}f={}}}}j.open(a,c);if(g){for(prop in g){if(!g.hasOwnProperty(prop)){continue}j.setRequestHeader(prop,g[prop])}}j.send(f)};function Cocoafish(b,a,c){if(!a){this.appKey=b}else{this.oauthKey=b;this.oauthSecret=a}if(c){this.apiBaseURL=c}else{this.apiBaseURL=com.cocoafish.sdk.url.baseURL}return this}Cocoafish.prototype.sendRequest=function(i,h,z,j,q){var s=com.cocoafish.js.sdk.utils.getAuthType(this);if(s==com.cocoafish.constants.unknown){j(com.cocoafish.constants.noAppKeyError);return}var c=true;if(arguments.length==4){c=true}else{if(arguments.length==5){if(typeof(j)=="boolean"){c=j;j=q}else{c=q}}else{j(com.cocoafish.constants.invalidArgumentError);return}}var n="";if(c){n+=com.cocoafish.sdk.url.https}else{n+=com.cocoafish.sdk.url.http}n+=this.apiBaseURL+"/"+com.cocoafish.sdk.url.version+"/"+i;if(s==com.cocoafish.constants.app_key){n+=com.cocoafish.constants.keyParam+this.appKey}var A=this;var p=function(C,B,E){if(C&&C.meta&&C.meta.session_id){var D=C.meta.session_id;com.cocoafish.js.sdk.utils.setCookie(com.cocoafish.constants.sessionId,D);A.session_id=D}j(C)};if(z==null){z={}}var l=h?h.toUpperCase():com.cocoafish.constants.get_method;if(com.cocoafish.js.sdk.utils.BrowserDetect.browser==com.cocoafish.constants.ie){if(l==com.cocoafish.constants.put_method||l==com.cocoafish.constants.delete_method){z[com.cocoafish.constants.method]=l;l=com.cocoafish.constants.post_method}}z[com.cocoafish.constants.suppressCode]="true";var w=com.cocoafish.js.sdk.utils.getCookie(com.cocoafish.constants.sessionId);if(!w){w=this.session_id}if(w){if(n.indexOf("?")!=-1){n+="&"+com.cocoafish.constants.sessionId+"="+w}else{n+="?"+com.cocoafish.constants.sessionId+"="+w}}z=com.cocoafish.js.sdk.utils.cleanInvalidData(z);var y=com.cocoafish.js.sdk.utils.getFileObject(z);if(y){if(com.cocoafish.js.sdk.utils.BrowserDetect.browser==com.cocoafish.constants.ie){var g=com.cocoafish.js.sdk.utils.prepareFormDataArray(z);var b={name:com.cocoafish.constants.suppressCode,value:true};g.push(b);var d=com.cocoafish.constants.ie_post_message;var u={name:com.cocoafish.constants.response_wrapper,value:d};g.push(u);var t={};if(s==com.cocoafish.constants.oauth){var m={method:l,action:n,parameters:[]};com.cocoafish.js.sdk.utils.populateOAuthParameters(m.parameters,this.oauthKey);OAuth.completeRequest(m,{consumerSecret:this.oauthSecret});var k=com.cocoafish.js.sdk.utils.getOAuthParameters(m.parameters);if(k&&n.indexOf("?")!=-1){n+="&"+k}else{n+="?"+k}}var o=y.fileupload({dataType:com.cocoafish.constants.json,url:n,headers:t,formData:function(B){return g},done:function(C,B){j(B.result)}});var f="";if(z.file){f=com.cocoafish.constants.file}else{if(z.photo){f=com.cocoafish.constants.photo}}y.prop(com.cocoafish.constants.name,f);o.fileupload("send",{files:[{name:f}]})}else{if(com.cocoafish.js.sdk.utils.BrowserDetect.browser==com.cocoafish.constants.appcelerator){if(y){try{var a;if(y.toString().match(/TiFilesystemFile/)){a=y.read()}else{a=y}if(!a){j(com.cocoafish.constants.fileLoadError);return}if(z[com.cocoafish.constants.file]){delete z[com.cocoafish.constants.file];z[com.cocoafish.constants.file]=a}else{if(z[com.cocoafish.constants.photo]){delete z[com.cocoafish.constants.photo];z[com.cocoafish.constants.photo]=a}}}catch(x){j(com.cocoafish.constants.fileLoadError);return}var t={};if(s==com.cocoafish.constants.oauth){if(n.indexOf("?")!=-1){n+="&"+com.cocoafish.constants.oauth_consumer_key+"="+this.oauthKey}else{n+="?"+com.cocoafish.constants.oauth_consumer_key+"="+this.oauthKey}var m={method:l,action:n,parameters:[]};com.cocoafish.js.sdk.utils.populateOAuthParameters(m.parameters,this.oauthKey);OAuth.completeRequest(m,{consumerSecret:this.oauthSecret});t[com.cocoafish.constants.oauth_header]=OAuth.getAuthorizationHeader("",m.parameters)}com.cocoafish.js.sdk.utils.sendAppceleratorRequest(n,l,z,t,j,this)}else{j(com.cocoafish.constants.fileLoadError)}}else{var r=com.cocoafish.js.sdk.utils.prepareFormData(z);r.append(com.cocoafish.constants.suppressCode,true);var t={};if(s==com.cocoafish.constants.oauth){if(n.indexOf("?")!=-1){n+="&"+com.cocoafish.constants.oauth_consumer_key+"="+this.oauthKey}else{n+="?"+com.cocoafish.constants.oauth_consumer_key+"="+this.oauthKey}var m={method:l,action:n,parameters:[]};com.cocoafish.js.sdk.utils.populateOAuthParameters(m.parameters,this.oauthKey);OAuth.completeRequest(m,{consumerSecret:this.oauthSecret});t[com.cocoafish.constants.oauth_header]=OAuth.getAuthorizationHeader("",m.parameters)}$.postCORSWithFile(n,r,p,com.cocoafish.constants.json,t,{withCredentials:true})}}}else{var t={};if(s==com.cocoafish.constants.oauth){if(com.cocoafish.js.sdk.utils.BrowserDetect.browser!=com.cocoafish.constants.ie){if(n.indexOf("?")!=-1){n+="&"+com.cocoafish.constants.oauth_consumer_key+"="+this.oauthKey}else{n+="?"+com.cocoafish.constants.oauth_consumer_key+"="+this.oauthKey}}var m={method:l,action:n,parameters:[]};for(prop in z){if(!z.hasOwnProperty(prop)){continue}m.parameters.push([prop,z[prop]])}com.cocoafish.js.sdk.utils.populateOAuthParameters(m.parameters,this.oauthKey);OAuth.completeRequest(m,{consumerSecret:this.oauthSecret});if(com.cocoafish.js.sdk.utils.BrowserDetect.browser==com.cocoafish.constants.ie){var k=com.cocoafish.js.sdk.utils.getOAuthParameters(m.parameters);if(k&&n.indexOf("?")!=-1){n+="&"+k}else{n+="?"+k}}else{t[com.cocoafish.constants.oauth_header]=OAuth.getAuthorizationHeader("",m.parameters)}}if(com.cocoafish.js.sdk.utils.BrowserDetect.browser==com.cocoafish.constants.appcelerator){com.cocoafish.js.sdk.utils.sendAppceleratorRequest(n,l,z,t,j,this)}else{if(h.toUpperCase()==com.cocoafish.constants.get_method){$.getCORS(n,z,p,com.cocoafish.constants.json,t)}else{if(h.toUpperCase()==com.cocoafish.constants.post_method){$.postCORS(n,z,p,com.cocoafish.constants.json,t,{withCredentials:true})}else{if(h.toUpperCase()==com.cocoafish.constants.put_method){$.putCORS(n,z,p,com.cocoafish.constants.json,t,{withCredentials:true})}else{if(h.toUpperCase()==com.cocoafish.constants.delete_method){$.deleteCORS(n,z,p,com.cocoafish.constants.json,t,{withCredentials:true})}}}}}}};